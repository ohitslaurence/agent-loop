import type { Run, Step, RunEvent } from '../lib/types'

export const runs: Run[] = [
  {
    id: 'run-001',
    name: 'Add user authentication',
    name_source: 'spec',
    status: 'Running',
    workspace_root: '/home/user/projects/web-app',
    spec_path: '/home/user/projects/web-app/specs/auth.md',
    plan_path: '/home/user/projects/web-app/specs/auth-plan.md',
    worktree: {
      worktree_path: '/tmp/loop/run-001',
      run_branch: 'loop/run-001',
      base_branch: 'main',
      merge_strategy: 'Squash',
      provider: 'Native',
    },
    created_at: '2026-02-01T10:00:00Z',
    updated_at: '2026-02-01T10:05:00Z',
  },
  {
    id: 'run-002',
    name: 'Fix login validation',
    name_source: 'spec',
    status: 'Completed',
    workspace_root: '/home/user/projects/web-app',
    spec_path: '/home/user/projects/web-app/specs/login-fix.md',
    worktree: {
      worktree_path: '/tmp/loop/run-002',
      run_branch: 'loop/run-002',
      base_branch: 'main',
      merge_target_branch: 'develop',
      merge_strategy: 'MergeLast',
      provider: 'Native',
    },
    created_at: '2026-02-01T09:00:00Z',
    updated_at: '2026-02-01T09:30:00Z',
  },
  {
    id: 'run-003',
    name: 'Add API rate limiting',
    name_source: 'spec',
    status: 'Failed',
    workspace_root: '/home/user/projects/api-server',
    spec_path: '/home/user/projects/api-server/specs/rate-limit.md',
    created_at: '2026-02-01T08:00:00Z',
    updated_at: '2026-02-01T08:15:00Z',
  },
  {
    id: 'run-004',
    name: 'Refactor database layer',
    name_source: 'spec',
    status: 'Pending',
    workspace_root: '/home/user/projects/api-server',
    spec_path: '/home/user/projects/api-server/specs/db-refactor.md',
    created_at: '2026-02-01T11:00:00Z',
    updated_at: '2026-02-01T11:00:00Z',
  },
]

export const steps: Record<string, Step[]> = {
  'run-001': [
    {
      id: 'step-001-1',
      run_id: 'run-001',
      phase: 'Implementation',
      status: 'Succeeded',
      attempt: 1,
      started_at: '2026-02-01T10:00:30Z',
      completed_at: '2026-02-01T10:02:00Z',
      output_path: '/tmp/loop/run-001/output/impl-1.log',
      exit_code: 0,
    },
    {
      id: 'step-001-2',
      run_id: 'run-001',
      phase: 'Review',
      status: 'Running',
      attempt: 1,
      started_at: '2026-02-01T10:02:30Z',
    },
  ],
  'run-002': [
    {
      id: 'step-002-1',
      run_id: 'run-002',
      phase: 'Implementation',
      status: 'Succeeded',
      attempt: 1,
      started_at: '2026-02-01T09:00:30Z',
      completed_at: '2026-02-01T09:10:00Z',
      output_path: '/tmp/loop/run-002/output/impl-1.log',
      exit_code: 0,
    },
    {
      id: 'step-002-2',
      run_id: 'run-002',
      phase: 'Review',
      status: 'Succeeded',
      attempt: 1,
      started_at: '2026-02-01T09:10:30Z',
      completed_at: '2026-02-01T09:15:00Z',
      output_path: '/tmp/loop/run-002/output/review-1.log',
      exit_code: 0,
    },
    {
      id: 'step-002-3',
      run_id: 'run-002',
      phase: 'Verification',
      status: 'Succeeded',
      attempt: 1,
      started_at: '2026-02-01T09:15:30Z',
      completed_at: '2026-02-01T09:20:00Z',
      output_path: '/tmp/loop/run-002/output/verify-1.log',
      exit_code: 0,
    },
    {
      id: 'step-002-4',
      run_id: 'run-002',
      phase: 'Merge',
      status: 'Succeeded',
      attempt: 1,
      started_at: '2026-02-01T09:20:30Z',
      completed_at: '2026-02-01T09:25:00Z',
      output_path: '/tmp/loop/run-002/output/merge-1.log',
      exit_code: 0,
    },
  ],
  'run-003': [
    {
      id: 'step-003-1',
      run_id: 'run-003',
      phase: 'Implementation',
      status: 'Failed',
      attempt: 1,
      started_at: '2026-02-01T08:00:30Z',
      completed_at: '2026-02-01T08:10:00Z',
      output_path: '/tmp/loop/run-003/output/impl-1.log',
      exit_code: 1,
    },
  ],
}

export const events: Record<string, RunEvent[]> = {
  'run-001': [
    {
      id: 'evt-001-1',
      run_id: 'run-001',
      event_type: 'run_started',
      timestamp: Date.parse('2026-02-01T10:00:00Z'),
      payload: {},
    },
    {
      id: 'evt-001-2',
      run_id: 'run-001',
      step_id: 'step-001-1',
      event_type: 'step_started',
      timestamp: Date.parse('2026-02-01T10:00:30Z'),
      payload: { phase: 'Implementation' },
    },
    {
      id: 'evt-001-3',
      run_id: 'run-001',
      step_id: 'step-001-1',
      event_type: 'step_completed',
      timestamp: Date.parse('2026-02-01T10:02:00Z'),
      payload: { phase: 'Implementation', status: 'Succeeded' },
    },
    {
      id: 'evt-001-4',
      run_id: 'run-001',
      step_id: 'step-001-2',
      event_type: 'step_started',
      timestamp: Date.parse('2026-02-01T10:02:30Z'),
      payload: { phase: 'Review' },
    },
  ],
  'run-002': [
    {
      id: 'evt-002-1',
      run_id: 'run-002',
      event_type: 'run_started',
      timestamp: Date.parse('2026-02-01T09:00:00Z'),
      payload: {},
    },
    {
      id: 'evt-002-2',
      run_id: 'run-002',
      event_type: 'run_completed',
      timestamp: Date.parse('2026-02-01T09:25:00Z'),
      payload: { status: 'Completed' },
    },
  ],
}
